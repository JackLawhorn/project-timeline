(this["webpackJsonpproject-timeline"]=this["webpackJsonpproject-timeline"]||[]).push([[0],{15:function(e){e.exports=JSON.parse('[{"label":"Timeline A","start":0,"end":50,"color":"crimson","events":[{"label":"Event A"}]},{"label":"Timeline B","start":25,"end":75,"color":"cornflowerblue","events":[{"label":"Event B"}]},{"label":"Timeline C","start":50,"end":100,"color":"gold","events":[{"label":"Event C"}]},{"label":"Timeline D","start":12.5,"end":37.5,"color":"forestgreen","events":[{"label":"Event D"}]},{"label":"Timeline E","start":37.5,"end":62.5,"color":"MediumVioletRed ","events":[{"label":"Event E"}]},{"label":"Timeline F","start":62.5,"end":87.5,"color":"orangered","events":[{"label":"Event F"}]}]')},22:function(e,t,n){},23:function(e,t,n){},24:function(e,t,n){},30:function(e,t,n){"use strict";n.r(t);var l=n(0),a=n(4),i=n.n(a),s=n(14),o=n.n(s),c=(n(22),n(5)),r=n(6),d=n(2),h=n(8),u=n(7),b=(n(23),n(24),n(15)),m=n(3),v=n.n(m),j=function(e){Object(h.a)(n,e);var t=Object(u.a)(n);function n(e){var l;return Object(c.a)(this,n),(l=t.call(this,e)).state={files:""},l.handleLoadFile=e.handleLoadFile,l.loadFile=l.loadFile.bind(Object(d.a)(l)),l.newFile=l.newFile.bind(Object(d.a)(l)),l.handleChange=l.handleChange.bind(Object(d.a)(l)),l}return Object(r.a)(n,[{key:"componentDidMount",value:function(){}},{key:"loadFile",value:function(e){v()("#file-input").click()}},{key:"newFile",value:function(){this.setState({files:"[]"},(function(){this.handleLoadFile(this.state.files)}))}},{key:"handleChange",value:function(e){var t=this,n=(this.state.history,new FileReader);n.readAsText(e.target.files[0],"UTF-8"),n.onload=function(e){t.setState({files:e.target.result},(function(){this.handleLoadFile(this.state.files)}))}}},{key:"render",value:function(){return Object(l.jsxs)("div",{className:"splash-screen",children:[Object(l.jsx)("h1",{children:"Timeline"}),Object(l.jsx)("p",{children:"Timeline is a notes app for time-based projects."}),Object(l.jsxs)("div",{className:"new-file-prompt",children:[Object(l.jsx)("h1",{children:"Create new file"}),Object(l.jsx)("button",{onClick:this.newFile,children:"Start"})]}),Object(l.jsxs)("div",{className:"load-file-prompt",children:[Object(l.jsx)("h1",{children:"Load from file"}),Object(l.jsx)("input",{type:"file",id:"file-input",onChange:this.handleChange}),Object(l.jsx)("button",{onClick:this.loadFile,children:"Choose file"})]})]})}}]),n}(i.a.Component),f=n(9),O=n(13),p=n(16),x=function(e){Object(h.a)(n,e);var t=Object(u.a)(n);function n(e){var l;Object(c.a)(this,n),l=t.call(this,e);var a=e.lines.concat([]);return a.forEach((function(e,t){e.events.forEach((function(t,n){t.posn=Math.round(Math.random()*(e.end-e.start)+e.start)}))})),l.state={lines:a,selectedEvent:e.selectedEvent,earliestDate:0,latestDate:0,disabledArray:Array(e.lines.length).fill(!1),trackPosn:-1,scrollPosn:0,zoom:1,resizeTicker:0,hasMounted:!1,mouseDown:null,readyForTrack:!0},l.handleSelect=e.handleSelect,l.totalLength=l.totalLength.bind(Object(d.a)(l)),l.trackerCoord=l.trackerCoord.bind(Object(d.a)(l)),l.allDates=l.allDates.bind(Object(d.a)(l)),l.updateTimeline=l.updateTimeline.bind(Object(d.a)(l)),l.handleToggleLine=l.handleToggleLine.bind(Object(d.a)(l)),l.handleTrack=l.handleTrack.bind(Object(d.a)(l)),l.handleSelectEvent=l.handleSelectEvent.bind(Object(d.a)(l)),l.handleClearSelected=l.handleClearSelected.bind(Object(d.a)(l)),l.handleZoomIn=l.handleZoomIn.bind(Object(d.a)(l)),l.handleZoomOut=l.handleZoomOut.bind(Object(d.a)(l)),l.handleScroll=l.handleScroll.bind(Object(d.a)(l)),l.handleSave=l.handleSave.bind(Object(d.a)(l)),l.handleCopy=l.handleCopy.bind(Object(d.a)(l)),l.renderLoad=l.renderLoad.bind(Object(d.a)(l)),l.fullRender=l.fullRender.bind(Object(d.a)(l)),l}return Object(r.a)(n,[{key:"componentDidMount",value:function(){var e=this;window.addEventListener("resize",(function(){var t=e.state.resizeTicker;e.setState({resizeTicker:t+1})})),this.setState({hasMounted:!0}),this.updateTimeline()}},{key:"totalLength",value:function(){return(this.state.latestDate-this.state.earliestDate)/this.state.zoom}},{key:"trackerCoord",value:function(){if(void 0!==v()("ul.timeline > .timeline-item > .line-container").position()){var e=v()("ul.timeline > .timeline-item > .line-container").position().left;return 10+v()("ul.timeline > .timeline-item > .line-container").width()*(this.state.trackPosn-Math.max(this.state.earliestDate,this.state.scrollPosn))/this.totalLength()+e}return 0}},{key:"allDates",value:function(){var e=[];return this.state.lines.forEach((function(t){e.indexOf(t.start)<0&&e.push(t.start),e.indexOf(t.end)<0&&e.push(t.end)})),e.sort((function(e,t){return e-t})),e}},{key:"updateTimeline",value:function(){var e=void 0,t=void 0;this.state.lines.forEach((function(n){void 0===e?(e=n.start,t=n.end):(n.start<e&&(e=n.start),n.end>t&&(t=n.end))})),this.setState({earliestDate:e,latestDate:t})}},{key:"handleToggleLine",value:function(e){var t=this.state.disabledArray.concat([]);this.state.lines.forEach((function(n,l){n.label===e.target.parentElement.getAttribute("label")&&(t[l]=!t[l])})),this.setState({disabledArray:t})}},{key:"handleTrack",value:function(e){if(["click","mousedown","mousemove"].indexOf(e.type)>=0&&1===e.buttons||"touchmove"===e.type&&this.state.readyForTrack)if(v()(e.target).hasClass("line-event"))this.handleSelectEvent(e);else{var t=this.totalLength(),n=this.state.earliestDate,l=this.state.latestDate,a=this.state.zoom,i=this.state.scrollPosn,s=v()(".timeline > .timeline-item > .line-container > .line-wrapper")[0].getBoundingClientRect().left,o=v()(".timeline > .timeline-item > .line-container > .line-wrapper").width(),c=this.state.trackPosn;(c=t/a*(("touchmove"===e.type?e.touches[0].clientX:e.clientX)-s-0)/(o/a)+Math.max(n,i))>=n&&c<=l&&this.setState({trackPosn:c,selectedEvent:{timeline:null,event:null},readyForTrack:!1},(function(){var e=this;setTimeout((function(){e.setState({readyForTrack:!0})}),0),this.handleSelect(this.state.selectedEvent)}))}}},{key:"handleSelectEvent",value:function(e){e.preventDefault(),e.stopPropagation();var t=v()(e.target).closest(".timeline-item").attr("label"),n=v()(e.target).attr("label"),l=v()(e.target).attr("posn");this.setState({selectedEvent:{timeline:t,event:n},trackPosn:l},(function(){this.handleSelect(this.state.selectedEvent)}))}},{key:"handleClearSelected",value:function(){this.setState({selectedEvent:{timeline:null,event:null},trackPosn:-1},(function(){this.handleSelect(this.state.selectedEvent)}))}},{key:"handleZoomIn",value:function(){var e=this.totalLength()*this.state.zoom,t=this.state.zoom+0,n=this.state.scrollPosn+0,l=Math.min(2,t+.1);this.setState({zoom:l,scrollPosn:Math.max(0,Math.min(e-e/l,n*l/t))})}},{key:"handleZoomOut",value:function(){var e=this.totalLength()*this.state.zoom,t=this.state.zoom+0,n=this.state.scrollPosn+0,l=Math.max(1,t-.1);this.setState({zoom:l,scrollPosn:Math.max(0,Math.min(e-e/l,n*l/t))})}},{key:"handleScroll",value:function(e){if(e.altKey||e.shiftKey)if(e.altKey)e.deltaY>0?this.handleZoomOut(e):this.handleZoomIn(e);else if(e.shiftKey){var t=this.state.scrollPosn,n=this.state.zoom,l=this.state.earliestDate,a=this.state.latestDate,i=(e.deltaY<0?-1:1)*n*this.totalLength()/20;this.setState({scrollPosn:Math.min(a-this.totalLength(),Math.max(l,t+i))})}}},{key:"handleSave",value:function(){var e=document.createElement("a");e.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(JSON.stringify(this.state.lines))),e.setAttribute("download","timeline.json"),e.style.display="none",document.body.appendChild(e),e.click(),document.body.removeChild(e)}},{key:"handleCopy",value:function(){var e=document.createElement("input");e.setAttribute("type","text"),e.value=JSON.stringify(this.state.lines),document.body.appendChild(e),e.select(),e.setSelectionRange(0,99999),document.execCommand("copy"),document.body.removeChild(e)}},{key:"render",value:function(){return this.state.hasMounted?this.fullRender():this.renderLoad()}},{key:"renderLoad",value:function(){return Object(l.jsx)("div",{className:"timeline-container",children:Object(l.jsx)("div",{className:"load-spinner"})})}},{key:"fullRender",value:function(){var e=this,t=this.state.selectedEvent,n=this.state.earliestDate+this.state.scrollPosn,a=this.totalLength(),i=this.allDates(),s=this.state.disabledArray,o=this.trackerCoord(),c=this.state.trackPosn,r=this.state.zoom,d=this.state.scrollPosn,h=this.handleToggleLine,u=this.handleTrack,b=this.handleClearSelected,m=this.handleZoomIn,j=this.handleZoomOut,x=this.handleScroll,g=this.handleSave,y=(this.handleCopy,void 0!==v()("ul.timeline > .timeline-item > .line-container").position()?v()("ul.timeline > .timeline-item > .line-container").position().left:0);return Object(l.jsxs)("div",{className:"timeline-container",onWheel:x,onMouseDown:function(t){return e.setState({mouseDown:t.target})},onMouseUp:function(t){e.setState({mouseDown:null})},children:[Object(l.jsxs)("ul",{className:"timeline",dragging:null!==this.state.mouseDown?"dragging":void 0,foggedleft:r>1&&d>0?"foggedleft":void 0,foggedright:r>1&&d<a?"foggedleft":void 0,onMouseDown:u,onMouseMove:u,onTouchMove:u,children:[c>=d&&Object(l.jsx)("div",{className:"timeline-tracker",posn:c,style:{left:o+"px"}}),Object(l.jsxs)("li",{className:"timeline-item ruler-container",children:[Object(l.jsx)("div",{}),Object(l.jsx)("div",{}),Object(l.jsx)("div",{className:"ruler",children:Object(l.jsx)("div",{className:"ruler-wrapper",children:i.map((function(e,t){return Object(l.jsx)("div",{className:"rule",posn:e,posnvisible:e>=d?"posnvisible":void 0,style:{left:100*(e-n)/a+"%"}},t)}))})})]}),this.state.lines.map((function(e,i){return Object(l.jsxs)("li",{className:"timeline-item",label:e.label,style:{color:e.color},children:[Object(l.jsx)("div",{className:"line-label",title:e.label,children:e.label}),Object(l.jsx)("input",{type:"checkbox",className:"line-toggle",label:e.label,style:{backgroundColor:e.color},checked:s[i]?void 0:"checked",onChange:h}),Object(l.jsx)("div",{className:"line-container",tracked:(e.start>c||e.end<c)&&-1!==c?void 0:"tracked",children:Object(l.jsxs)("div",{className:"line-wrapper",startvisible:e.start>=d?"startvisible":void 0,endvisible:e.end<=a*r?"endvisible":void 0,children:[Object(l.jsx)("div",{className:"line",style:{backgroundColor:e.color,left:Math.max(0,100*(e.start-n)/a)+"%",width:Math.max(0,100*(e.end-Math.max(e.start,d))/a)+"%"}}),e.events.map((function(i,s){return Object(l.jsx)("div",{className:"line-event",posn:i.posn,label:i.label,posnvisible:i.posn>=d?"posnvisible":void 0,isselected:e.label===t.timeline&&i.label===t.event?"isselected":void 0,style:{left:100*(i.posn-n)/a+"%",backgroundColor:e.color}},s)}))]})})]},i)}))]}),Object(l.jsxs)("div",{className:"timeline-bottom",children:[Object(l.jsx)("div",{className:"timeline-scrollbar",children:Object(l.jsx)("div",{className:"scrollbar-thumb",style:{left:100*d/(a*r)+"%",width:"calc("+100/r+"% - "+y+"px)",marginLeft:y}})}),Object(l.jsxs)("div",{className:"timeline-controls",children:[Object(l.jsxs)("button",{className:"save-button",onClick:g,children:[Object(l.jsx)(f.a,{icon:O.a}),Object(l.jsx)("span",{children:"Save file"})]}),Object(l.jsxs)("span",{title:"Use buttons or Alt+Scroll to zoom timelines",children:[Object(l.jsx)("button",{className:"zoom-in",onMouseDown:m,children:"+"}),Object(l.jsxs)("span",{zoom:Math.round(100*this.state.zoom),children:[Object(l.jsx)(f.a,{icon:O.b}),Object(l.jsx)("span",{children:Math.floor(100*r)+"%"})]}),Object(l.jsx)("button",{className:"zoom-out",onMouseDown:j,children:"\u2212"})]}),c>=0&&Object(l.jsxs)("button",{className:"clear-button",onClick:b,children:[Object(l.jsx)(f.a,{icon:p.a}),Object(l.jsx)("span",{children:"Clear selected"})]}),-1===c&&Object(l.jsx)("div",{})]})]})]})}}]),n}(i.a.Component),g=function(e){Object(h.a)(n,e);var t=Object(u.a)(n);function n(e){var l;return Object(c.a)(this,n),(l=t.call(this,e)).state={lines:b,selectedEvent:{timeline:null,event:null}},l.handleLoadFile=l.handleLoadFile.bind(Object(d.a)(l)),l.handleSelect=l.handleSelect.bind(Object(d.a)(l)),l.fullRender=l.fullRender.bind(Object(d.a)(l)),l.renderLoad=l.renderLoad.bind(Object(d.a)(l)),l}return Object(r.a)(n,[{key:"componentDidMount",value:function(){}},{key:"handleLoadFile",value:function(e){this.setState({lines:JSON.parse(e)})}},{key:"handleSelect",value:function(e){this.setState({selectedEvent:e})}},{key:"render",value:function(){return null!==this.state.lines?this.fullRender():this.renderLoad()}},{key:"fullRender",value:function(){var e=this.state.lines,t=this.state.selectedEvent,n="";return void 0!==e&&null!==t.event&&e.forEach((function(e,l){e.events.forEach((function(l,a){e.label===t.timeline&&l.label===t.event&&(n=JSON.stringify(e))}))})),Object(l.jsxs)("div",{className:"App",children:[Object(l.jsx)(x,{lines:e,selectedEvent:this.state.selectedEvent,handleSelect:this.handleSelect}),Object(l.jsx)("div",{className:"blur"}),Object(l.jsx)("div",{className:"displaySelected",children:n})]})}},{key:"renderLoad",value:function(){return Object(l.jsx)("div",{className:"App",children:Object(l.jsx)(j,{handleLoadFile:this.handleLoadFile})})}}]),n}(i.a.Component),y=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,31)).then((function(t){var n=t.getCLS,l=t.getFID,a=t.getFCP,i=t.getLCP,s=t.getTTFB;n(e),l(e),a(e),i(e),s(e)}))};o.a.render(Object(l.jsx)(i.a.StrictMode,{children:Object(l.jsx)(g,{})}),document.getElementById("root")),y()}},[[30,1,2]]]);
//# sourceMappingURL=main.af993d68.chunk.js.map