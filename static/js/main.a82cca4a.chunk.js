(this["webpackJsonpproject-timeline"]=this["webpackJsonpproject-timeline"]||[]).push([[0],{16:function(e,t,n){},17:function(e,t,n){},18:function(e,t,n){},19:function(e,t,n){"use strict";n.r(t);var l=n(0),a=n(3),i=n.n(a),s=n(10),o=n.n(s),c=(n(16),n(4)),r=n(5),d=n(1),h=n(7),u=n(6),b=(n(17),n(18),n(8)),v=n(2),m=n.n(v),f=function(e){Object(h.a)(n,e);var t=Object(u.a)(n);function n(e){var l;return Object(c.a)(this,n),(l=t.call(this,e)).state={lines:e.lines,selectedEvent:e.selectedEvent,earliestDate:0,latestDate:0,allDates:[],disabledArray:Array(e.lines.length).fill(!1),trackPosn:-1,trackedArray:Array(e.lines.length).fill(!0),hasMounted:!1,zoom:1,scrollPosn:0,resizeTicker:0},l.handleSelect=e.handleSelect,l.totalLength=l.totalLength.bind(Object(d.a)(l)),l.trackerCoord=l.trackerCoord.bind(Object(d.a)(l)),l.updateTimeline=l.updateTimeline.bind(Object(d.a)(l)),l.handleToggleLine=l.handleToggleLine.bind(Object(d.a)(l)),l.handleTrack=l.handleTrack.bind(Object(d.a)(l)),l.handleSelectEvent=l.handleSelectEvent.bind(Object(d.a)(l)),l.handleClearSelected=l.handleClearSelected.bind(Object(d.a)(l)),l.handleZoomIn=l.handleZoomIn.bind(Object(d.a)(l)),l.handleZoomOut=l.handleZoomOut.bind(Object(d.a)(l)),l.handleScroll=l.handleScroll.bind(Object(d.a)(l)),l.renderLoad=l.renderLoad.bind(Object(d.a)(l)),l.fullRender=l.fullRender.bind(Object(d.a)(l)),l}return Object(r.a)(n,[{key:"componentDidMount",value:function(){var e=this.state.lines.concat([]);this.state.lines.forEach((function(e,t){e.events.forEach((function(t,n){t.posn=Math.round(Math.random()*(e.end-e.start)+e.start)}))}));var t=this;window.addEventListener("resize",(function(){var e=t.state.resizeTicker+0;t.setState({resizeTicker:e+1})})),this.setState({lines:e,hasMounted:!0}),this.updateTimeline()}},{key:"totalLength",value:function(){return(this.state.latestDate-this.state.earliestDate)/this.state.zoom}},{key:"trackerCoord",value:function(){if(void 0!==m()("ul.timeline > li > .line-container").position()){var e=m()("ul.timeline > li > .line-container").position().left;return m()("ul.timeline > li > .line-container").width()*(this.state.trackPosn-Math.max(this.state.earliestDate,this.state.scrollPosn))/this.totalLength()+e}return 0}},{key:"updateTimeline",value:function(){var e=void 0,t=void 0,n=[];this.state.lines.forEach((function(l){void 0===e?(e=l.start,t=l.end):(l.start<e&&(e=l.start),l.end>t&&(t=l.end)),n.indexOf(l.start)<0&&n.push(l.start),n.indexOf(l.end)<0&&n.push(l.end)})),this.setState({earliestDate:e,latestDate:t,allDates:n})}},{key:"handleToggleLine",value:function(e){var t=this.state.disabledArray.concat([]);this.state.lines.forEach((function(n,l){n.label===e.target.parentElement.getAttribute("label")&&(t[l]=!t[l])})),this.setState({disabledArray:t})}},{key:"handleTrack",value:function(e){if("click"===e.type||1===e.buttons)if(m()(e.target).hasClass("line-event"))this.handleSelectEvent(e);else{var t=this.totalLength(),n=this.state.earliestDate,l=this.state.zoom,a=this.state.scrollPosn,i=e.clientX,s=m()("ul.timeline > li > .line-container").position().left,o=m()("ul.timeline > li > .line-container").width(),c=this.state.trackPosn+0,r=Array(this.state.lines.length).fill(!0);i-s-15>=0&&(c=(t/l*(i-s-15)/(o/l)+Math.max(n,a)).toFixed(2),this.state.lines.forEach((function(e,t){(e.start>c||e.end<c)&&(r[t]=!1)})),this.setState({trackPosn:c,trackedArray:r,selectedEvent:{timeline:null,event:null}},(function(){this.handleSelect(this.state.selectedEvent)})))}}},{key:"handleSelectEvent",value:function(e){e.preventDefault(),e.stopPropagation();var t=m()(e.target).closest(".timeline-item").attr("label"),n=m()(e.target).attr("label"),l=m()(e.target).attr("posn"),a=Array(this.state.lines.length).fill(!0);this.state.lines.forEach((function(e,t){(e.start>l||e.end<l)&&(a[t]=!1)})),this.setState({selectedEvent:{timeline:t,event:n},trackPosn:l,trackedArray:a},(function(){this.handleSelect(this.state.selectedEvent)}))}},{key:"handleClearSelected",value:function(){this.setState({selectedEvent:{timeline:null,event:null},trackPosn:-1,trackedArray:Array(this.state.lines.length).fill(!0)},(function(){this.handleSelect(this.state.selectedEvent)}))}},{key:"handleZoomIn",value:function(){var e=this.state.zoom;this.setState({zoom:Math.min(e+.1,2)})}},{key:"handleZoomOut",value:function(){var e=this.state.zoom;this.setState({zoom:Math.max(1,e-.1)})}},{key:"handleScroll",value:function(e){if(e.altKey||e.shiftKey)if(e.altKey)e.deltaY>0?this.handleZoomOut(e):this.handleZoomIn(e);else if(e.shiftKey){var t=this.state.scrollPosn,n=this.state.zoom,l=this.state.earliestDate,a=this.state.latestDate,i=(e.deltaY<0?-1:1)*n*this.totalLength()/20;this.setState({scrollPosn:Math.min(a-this.totalLength(),Math.max(l,t+i))})}}},{key:"render",value:function(){return this.state.hasMounted?this.fullRender():this.renderLoad()}},{key:"renderLoad",value:function(){return Object(l.jsx)("div",{className:"timeline-container",children:Object(l.jsx)("div",{className:"load-spinner"})})}},{key:"fullRender",value:function(){var e=this.state.selectedEvent,t=this.state.earliestDate+this.state.scrollPosn,n=this.totalLength(),a=this.state.allDates,i=this.state.disabledArray,s=this.trackerCoord(),o=this.state.trackPosn,c=this.state.trackedArray,r=this.state.zoom,d=this.state.scrollPosn,h=this.handleToggleLine,u=this.handleTrack,b=this.handleClearSelected,v=this.handleZoomIn,f=this.handleZoomOut,j=this.handleScroll,O=void 0!==m()("ul.timeline > li > .line-container").position()?m()("ul.timeline > li > .line-container").position().left:0;return a.sort((function(e,t){return e-t})),Object(l.jsxs)("div",{className:"timeline-container",children:[Object(l.jsxs)("ul",{className:"timeline",zoomed:this.state.zoom>1?"zoomed":void 0,onMouseDown:u,onMouseMove:u,onWheel:j,children:[o>=0&&Object(l.jsx)("div",{className:"timeline-tracker",posn:o,style:{left:s+"px"}}),Object(l.jsxs)("li",{className:"timeline-item ruler-container",children:[Object(l.jsx)("div",{}),Object(l.jsx)("div",{}),Object(l.jsx)("div",{className:"ruler",children:a.map((function(e,a){return Object(l.jsx)("div",{className:"rule",posn:e,posnvisible:e>=d?"posnvisible":void 0,style:{left:100*(e-t)/n+"%"}},a)}))})]}),this.state.lines.map((function(a,s){return Object(l.jsxs)("li",{className:"timeline-item",label:a.label,style:{color:a.color},children:[Object(l.jsx)("div",{className:"line-label",title:a.label,children:a.label}),Object(l.jsx)("input",{type:"checkbox",className:"line-toggle",label:a.label,style:{backgroundColor:a.color},checked:i[s]?void 0:"checked",onChange:h}),Object(l.jsxs)("div",{className:"line-container",tracked:c[s]?"tracked":void 0,children:[Object(l.jsx)("div",{className:"line",startvisible:a.start>=d?"startvisible":void 0,endvisible:a.end>=d?"endvisible":void 0,style:{backgroundColor:a.color,left:Math.max(0,100*(a.start-t)/n)+"%",width:Math.max(0,100*(a.end-Math.max(a.start,d))/n)+"%"}}),a.events.map((function(i,s){return Object(l.jsx)("div",{className:"line-event",posn:i.posn,label:i.label,posnvisible:i.posn>=d?"posnvisible":void 0,isselected:a.label===e.timeline&&i.label===e.event?"isselected":void 0,style:{left:100*(i.posn-t)/n+"%",backgroundColor:a.color}},s)}))]})]},s)}))]}),Object(l.jsxs)("div",{className:"timeline-bottom",children:[r>1&&Object(l.jsx)("div",{className:"timeline-scrollbar",children:Object(l.jsx)("div",{className:"scrollbar-thumb",style:{left:100*d/(n*r)+"%",width:"calc("+100/r+"% - "+O+"px)",marginLeft:O}})}),Object(l.jsxs)("div",{className:"timeline-controls",children:[Object(l.jsx)("button",{className:"zoom-in",onMouseDown:v,children:"+"}),Object(l.jsx)("span",{zoom:Math.round(100*this.state.zoom),children:"Zoom"}),Object(l.jsx)("button",{className:"zoom-out",onMouseDown:f,children:"\u2212"}),o>=0&&Object(l.jsx)("button",{className:"clear-button",onClick:b,children:"Clear selected"})]})]})]})}}]),n}(i.a.Component),j=function(e){Object(h.a)(n,e);var t=Object(u.a)(n);function n(e){var l;return Object(c.a)(this,n),(l=t.call(this,e)).state={selectedEvent:{timeline:null,event:null}},l.handleSelect=l.handleSelect.bind(Object(d.a)(l)),l}return Object(r.a)(n,[{key:"componentDidMount",value:function(){}},{key:"handleSelect",value:function(e){this.setState({selectedEvent:e})}},{key:"render",value:function(){var e=this.state.selectedEvent,t="";return void 0!==b&&null!==e.event&&b.forEach((function(n,l){n.events.forEach((function(l,a){n.label===e.timeline&&l.label===e.event&&(t=JSON.stringify(n))}))})),Object(l.jsxs)("div",{className:"App",children:[Object(l.jsx)(f,{lines:b,selectedEvent:this.state.selectedEvent,handleSelect:this.handleSelect}),Object(l.jsx)("div",{className:"displaySelected",children:t})]})}}]),n}(i.a.Component),O=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,20)).then((function(t){var n=t.getCLS,l=t.getFID,a=t.getFCP,i=t.getLCP,s=t.getTTFB;n(e),l(e),a(e),i(e),s(e)}))};o.a.render(Object(l.jsx)(i.a.StrictMode,{children:Object(l.jsx)(j,{})}),document.getElementById("root")),O()},8:function(e){e.exports=JSON.parse('[{"label":"Timeline A","start":0,"end":50,"color":"crimson","events":[{"label":"Event A"}]},{"label":"Timeline B","start":25,"end":75,"color":"cornflowerblue","events":[{"label":"Event B"}]},{"label":"Timeline C","start":50,"end":100,"color":"gold","events":[{"label":"Event C"}]},{"label":"Timeline D","start":12.5,"end":37.5,"color":"forestgreen","events":[{"label":"Event D"}]},{"label":"Timeline E","start":37.5,"end":62.5,"color":"blueviolet","events":[{"label":"Event E"}]},{"label":"Timeline F","start":62.5,"end":87.5,"color":"orangered","events":[{"label":"Event F"}]}]')}},[[19,1,2]]]);
//# sourceMappingURL=main.a82cca4a.chunk.js.map