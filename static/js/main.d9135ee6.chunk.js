(this["webpackJsonpproject-timeline"]=this["webpackJsonpproject-timeline"]||[]).push([[0],{13:function(e){e.exports=JSON.parse('[{"label":"Timeline A","notes":"These are the timeline notes","start":0,"end":50,"color":"crimson","events":[{"label":"Event A1","notes":"These are the event notes."},{"label":"Event A2","notes":"These are the event notes."}]},{"label":"Timeline B","notes":"These are the timeline notes","start":25,"end":75,"color":"cornflowerblue","events":[{"label":"Event B","notes":"These are the event notes."}]},{"label":"Timeline C","notes":"These are the timeline notes","start":50,"end":100,"color":"gold","events":[{"label":"Event C","notes":"These are the event notes."}]},{"label":"Timeline D","notes":"These are the timeline notes","start":12.5,"end":37.5,"color":"forestgreen","events":[{"label":"Event D","notes":"These are the event notes."}]},{"label":"Timeline E","notes":"These are the timeline notes","start":37.5,"end":62.5,"color":"MediumVioletRed ","events":[{"label":"Event E","notes":"These are the event notes."}]},{"label":"Timeline F","notes":"These are the timeline notes","start":62.5,"end":87.5,"color":"orangered","events":[{"label":"Event F","notes":"These are the event notes."}]}]')},22:function(e,t,n){},23:function(e,t,n){},24:function(e,t,n){},30:function(e,t,n){"use strict";n.r(t);var l=n(0),a=n(5),s=n.n(a),i=n(16),o=n.n(i),c=(n(22),n(7)),r=n(8),d=n(2),h=n(10),u=n(9),m=(n(23),n(24),n(13)),b=n(3),j=n.n(b),v=n(6),O=n(4),x=n(15),f=function(e){Object(h.a)(n,e);var t=Object(u.a)(n);function n(e){var l;return Object(c.a)(this,n),(l=t.call(this,e)).state={source:e.source,selectedTimeline:e.selectedObject.timeline,selectedEvent:e.selectedObject.event,hasMounted:!1},l.handleSelect=e.handleSelect,l.handleGoToProjectRoot=l.handleGoToProjectRoot.bind(Object(d.a)(l)),l.handleSelectTimeline=l.handleSelectTimeline.bind(Object(d.a)(l)),l.handleSelectEvent=l.handleSelectEvent.bind(Object(d.a)(l)),l}return Object(r.a)(n,[{key:"componentDidMount",value:function(){this.setState({hasMounted:!0})}},{key:"componentWillReceiveProps",value:function(e){this.setState({source:e.source,selectedTimeline:e.selectedObject.timeline,selectedEvent:e.selectedObject.event})}},{key:"handleGoToProjectRoot",value:function(e){this.handleSelect(null)}},{key:"handleSelectTimeline",value:function(e){var t="";t=j()(e.target).hasClass("timeline-select")?j()(e.target).attr("value"):j()(e.target).closest(".file-view-timeline-item").attr("value"),this.handleSelect(t)}},{key:"handleSelectEvent",value:function(e){var t="";t=j()(e.target).hasClass("event-select")?j()(e.target).attr("value"):j()(e.target).closest(".file-view-event-item").attr("value"),this.handleSelect(this.state.selectedTimeline.label,t)}},{key:"render",value:function(){return this.state.hasMounted?this.fullRender():this.renderLoad()}},{key:"renderLoad",value:function(){return Object(l.jsx)("div",{})}},{key:"fullRender",value:function(){var e,t=this.state,n=t.source,a=t.selectedTimeline,s=t.selectedEvent,i=this.handleGoToProjectRoot,o=this.handleSelectTimeline,c=this.handleSelectEvent,r=[],d=null!==(e=null!==s&&void 0!==s?s:a)&&void 0!==e?e:null;return r=null!==a?a.events:n,Object(l.jsxs)("div",{className:"main-overlay",children:[Object(l.jsxs)("div",{className:"selected-breadcrumbs",children:[Object(l.jsx)("div",{className:"clear-select",onClick:i,children:"Project"}),null!==a&&Object(l.jsx)(v.a,{icon:O.c}),null!==a&&null===s&&Object(l.jsx)("select",{className:"timeline-select",value:a.label,onChange:o,children:n.map((function(e,t){return Object(l.jsx)("option",{value:e.label,children:e.label},t)}))}),null!==a&&null!==s&&Object(l.jsx)("div",{className:"timeline-select",value:a.label,onClick:o,children:a.label}),null!==a&&null!==s&&Object(l.jsx)(v.a,{icon:O.c}),null!==a&&null!==s&&Object(l.jsx)("select",{className:"event-select",value:s.label,onChange:c,children:a.events.map((function(e,t){return Object(l.jsx)("option",{value:e.label,children:e.label},t)}))})]}),null!==d&&Object(l.jsxs)("div",{className:"notes-section",children:[Object(l.jsx)("div",{className:"selected-label",children:d.label}),Object(l.jsx)("div",{className:"selected-notes",children:d.notes})]}),null===s&&Object(l.jsxs)("div",{children:[null!==a&&Object(l.jsxs)("div",{className:"file-view-label",children:[Object(l.jsx)("b",{children:d.label}),"'s contents..."]}),Object(l.jsx)("table",{className:"file-view",children:Object(l.jsxs)("tbody",{children:[Object(l.jsxs)("tr",{className:"file-view-header",children:[Object(l.jsx)("th",{className:"item-label",children:"Name"}),Object(l.jsx)("th",{className:"item-type",children:"Type"}),Object(l.jsx)("th",{className:"item-posn",children:"Position"})]}),r.map((function(e,t){return Object(l.jsxs)("tr",{className:null===a?"file-view-timeline-item":"file-view-event-item",value:e.label,onClick:null===a?o:c,children:[Object(l.jsx)("td",{className:"item-label",style:{borderColor:e.color||"transparent"},children:e.label}),Object(l.jsx)("td",{className:"item-posn",children:null===a?"Timeline":"Event"}),Object(l.jsx)("td",{className:"item-posn",children:null===a?e.start+" \u2013 "+e.end:e.posn})]},t)}))]})})]})]})}}]),n}(s.a.Component),p=function(e){Object(h.a)(n,e);var t=Object(u.a)(n);function n(e){var l;Object(c.a)(this,n),(l=t.call(this,e)).handleZoomIn=function(){return l.handleZoom(.1)},l.handleZoomOut=function(){return l.handleZoom(-.1)},l.closeOverlay=function(){return l.setOverlay("none")},l.toggleMenu=function(){return l.setOverlay("none"===l.state.overlay?"menu":"none")},l.openNavigation=function(){return l.setOverlay("main")},l.toggleFullscreen=function(){return l.setState({fullscreen:!l.state.fullscreen})};var a=e.source.concat([]);return a.forEach((function(e,t){e.events.forEach((function(t,n){t.posn=Math.round(Math.random()*(e.end-e.start)+e.start)}))})),l.state={source:a,selectedTimeline:null,selectedEvent:null,overlay:"none",fullscreen:!1,disabledArray:Array(e.source.length).fill(!1),trackPosn:-1,scrollPosn:0,zoom:1,hasMounted:!1,mouseDown:null,readyForTrack:!0,minWidth:e.minWidth,width:e.width,maxWidth:e.maxWidth,minHeight:e.minHeight,height:e.height,maxHeight:e.maxHeight,aspectRatio:e.aspectRatio},l.isTracked=l.isTracked.bind(Object(d.a)(l)),l.handleSelect=l.handleSelect.bind(Object(d.a)(l)),l.handleSelectTimeline=l.handleSelectTimeline.bind(Object(d.a)(l)),l.handleSelectEvent=l.handleSelectEvent.bind(Object(d.a)(l)),l.handleToggleLine=l.handleToggleLine.bind(Object(d.a)(l)),l.handleTrack=l.handleTrack.bind(Object(d.a)(l)),l.handleScroll=l.handleScroll.bind(Object(d.a)(l)),l.handleZoomIn=l.handleZoomIn.bind(Object(d.a)(l)),l.handleZoomOut=l.handleZoomOut.bind(Object(d.a)(l)),l.handleDragToZoom=l.handleDragToZoom.bind(Object(d.a)(l)),l.handleClearState=l.handleClearState.bind(Object(d.a)(l)),l.toggleFullscreen=l.toggleFullscreen.bind(Object(d.a)(l)),l.handleKeyPress=l.handleKeyPress.bind(Object(d.a)(l)),l.handleSaveToFile=l.handleSaveToFile.bind(Object(d.a)(l)),l.handleCopyAsJSON=l.handleCopyAsJSON.bind(Object(d.a)(l)),l}return Object(r.a)(n,[{key:"componentDidMount",value:function(){var e=this;window.addEventListener("resize",(function(){var t=e.state.resizeTicker;e.setState({resizeTicker:(null!==t&&void 0!==t?t:0)+1})})),this.setState({hasMounted:!0})}},{key:"posnToCoord",value:function(e){var t=j()("ul.timeline > .timeline-item > .line-container");if(void 0===t.position())return 0;var n=j()(".timeline"),l=this.state,a=l.scrollPosn,s=l.zoom,i=this.boundsAndLength.totalLength;return t.position().left-n.position().left+parseInt(t.css("padding-left"))-2+t.width()*((e-a)/(i/s))}},{key:"coordToPosn",value:function(e){var t=j()(".timeline"),n=j()(".timeline > .timeline-item > .line-container > .line-wrapper"),l=this.state,a=l.zoom,s=l.scrollPosn,i=this.boundsAndLength,o=i.earliestDate,c=i.latestDate,r=i.totalLength,d=n[0].getBoundingClientRect().left,h=t.position().left,u=n.width();return Math.max(o,Math.min(c,r/Math.pow(a,2)*(e-(d-h))/(u/a)+Math.max(o,s)))}},{key:"isTracked",value:function(e){var t=this.state.trackPosn;return!(e.start>t||e.end<t)||-1===t}},{key:"handleSelect",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.state.overlay,l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(){};this.setState({selectedTimeline:e,selectedEvent:t,overlay:n},l())}},{key:"handleSelectTimeline",value:function(e){var t=j()(e.target).closest(".timeline-item").attr("label");this.handleSelect(t,null,"main")}},{key:"handleSelectEvent",value:function(e){var t=j()(e.target).closest(".timeline-item").attr("label"),n=j()(e.target).attr("label");this.handleSelect(t,n,"main")}},{key:"handleZoom",value:function(e){var t=this.state,n=t.zoom,l=t.scrollPosn,a=this.boundsAndLength.totalLength,s=Math.max(1,Math.min(2,n+e));this.setState({zoom:s,scrollPosn:Math.max(0,Math.min(a-a/s,l*s/n))})}},{key:"handleDragToZoom",value:function(e){e.movementX>0&&this.handleZoomIn(),e.movementX<0&&this.handleZoomOut()}},{key:"handleScroll",value:function(e){if(e.altKey||e.shiftKey){if(e.altKey)return e.deltaY>0?this.handleZoomOut(e):this.handleZoomIn(e);if(e.shiftKey){var t=this.state,n=t.scrollPosn,l=t.zoom,a=this.boundsAndLength,s=a.earliestDate,i=a.latestDate,o=a.totalLength,c=(e.deltaY<0?-1:1)*o/20;this.setState({scrollPosn:Math.min(i-o/l,Math.max(s,n+c))})}}}},{key:"snapToEvent",value:function(e){var t=j()(e.target).closest(".timeline-item").attr("label"),n=j()(e.target).attr("label"),l=j()(e.target).attr("posn");this.setState({trackPosn:l},this.handleSelect(t,n))}},{key:"handleTrack",value:function(e){if(!(j()(e.target).is(".timeline-bottom *")||["click","mousedown","mousemove","touchmove"].indexOf(e.type)<0||"touchmove"===e.type&&!this.state.readyForTrack||1!==e.buttons)){if(j()(e.target).hasClass("line-event"))return this.snapToEvent(e);var t="touchmove"===e.type?e.touches[0].clientX:e.clientX,n=this.coordToPosn(t);this.setState({trackPosn:n,readyForTrack:!1},(function(){var e=this;setTimeout((function(){e.setState({readyForTrack:!0})}),0)}))}}},{key:"handleToggleLine",value:function(e){var t=this.state.disabledArray.concat([]);this.state.source.forEach((function(n,l){n.label===j()(e.target).closest(".timeline-item").attr("label")&&(t[l]=!t[l])})),this.setState({disabledArray:t})}},{key:"handleClearState",value:function(){"none"!==this.state.overlay?this.closeOverlay():this.setState({trackPosn:-1,selectedTimeline:null,selectedEvent:null,zoom:1})}},{key:"handleKeyPress",value:function(e){"Escape"===e.key&&(this.state.fullscreen?this.toggleFullscreen():this.handleClearState())}},{key:"setOverlay",value:function(e){this.setState({overlay:e})}},{key:"handleSaveToFile",value:function(){var e=document.createElement("a");e.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(JSON.stringify(this.state.source))),e.setAttribute("download","timeline.json"),e.style.display="none",document.body.appendChild(e),e.click(),document.body.removeChild(e)}},{key:"handleCopyAsJSON",value:function(){var e=document.createElement("input");e.setAttribute("type","text"),e.value=JSON.stringify(this.state.source),document.body.appendChild(e),e.select(),e.setSelectionRange(0,99999),document.execCommand("copy"),document.body.removeChild(e)}},{key:"render",value:function(){return this.state.hasMounted?this.fullRender():this.renderLoad()}},{key:"renderLoad",value:function(){return Object(l.jsx)("div",{className:"timeline-container",children:Object(l.jsx)("div",{className:"load-spinner"})})}},{key:"fullRender",value:function(){var e,t,n=this,a=this.state,s=a.source,i=a.selectedTimeline,o=a.selectedEvent,c=a.overlay,r=a.disabledArray,d=a.mouseDown,h=a.zoom,u=a.scrollPosn,m=a.trackPosn,b={minWidth:this.state.minWidth,width:this.state.width,maxWidth:this.state.maxWidth,minHeight:this.state.minHeight,height:this.state.height,maxHeight:this.state.maxHeight,aspectRatio:this.state.aspectRatio},p=this.boundsAndLength.earliestDate+this.state.scrollPosn,y=this.boundsAndLength.totalLength,g=this.selectedObject,k=this.posnToCoord(this.state.trackPosn),T=this.allUniqueDates,S=this.isTracked,N=this.handleSelect,C=this.handleSelectTimeline,M=this.handleScroll,E=this.handleDragToZoom,w=this.handleToggleLine,P=this.handleTrack,A=this.handleClearState,L=this.handleKeyPress,D=this.toggleFullscreen,F=(this.closeOverlay,this.toggleMenu),R=this.openNavigation,Z=this.handleSaveToFile,I=this.handleCopyAsJSON,z=null!==(e=null===(t=j()("ul.timeline > .timeline-item > .line-container").position())||void 0===t?void 0:t.left)&&void 0!==e?e:0;return Object(l.jsxs)("div",{className:"timeline-container",theme:"light",style:b,tabIndex:"0",fullscreen:!0===this.state.fullscreen?"fullscreen":void 0,onMouseDown:function(e){return n.setState({mouseDown:e.target})},onMouseUp:function(e){n.setState({mouseDown:null})},onKeyDown:L,children:[Object(l.jsxs)("header",{className:"timeline-container-header",children:[Object(l.jsxs)("button",{className:"menu-button",onClick:F,children:[Object(l.jsx)(v.a,{icon:"none"===this.state.overlay?O.b:O.a}),Object(l.jsx)("span",{children:"none"===this.state.overlay?"Menu":"Back"})]}),Object(l.jsx)("div",{className:"project-title",children:"Project Timelines"}),Object(l.jsxs)("button",{className:"expand-collapse-button",onClick:D,children:[Object(l.jsx)(v.a,{icon:!0===this.state.fullscreen?O.d:O.e}),Object(l.jsx)("span",{children:!0===this.state.fullscreen?"Collapse":"Expand"})]})]}),Object(l.jsxs)("div",{className:"timeline-container-body",onMouseMove:P,children:[Object(l.jsxs)("div",{className:"overlay-layer",expanded:"none"!==c?"expanded":void 0,children:["none"!==c&&Object(l.jsxs)("ul",{className:"menu-overlay",children:[Object(l.jsxs)("li",{className:"open-navigation",onClick:R,tabIndex:"none"===c?"-1":"0",children:[Object(l.jsx)(v.a,{icon:x.b}),Object(l.jsx)("span",{children:"Navigation view"})]}),Object(l.jsxs)("li",{className:"save-button",onClick:Z,tabIndex:"none"===c?"-1":"0",children:[Object(l.jsx)(v.a,{icon:O.h}),Object(l.jsx)("span",{children:"Download as file"})]}),Object(l.jsxs)("li",{className:"copy-button",onClick:I,tabIndex:"none"===c?"-1":"0",children:[Object(l.jsx)(v.a,{icon:x.a}),Object(l.jsx)("span",{children:"Copy as JSON"})]})]}),"main"===c&&Object(l.jsx)(f,{source:this.state.source,selectedObject:g,handleSelect:N})]}),Object(l.jsxs)("ul",{className:"timeline",dragging:null!==d?"dragging":void 0,onWheel:M,children:[Object(l.jsxs)("li",{className:"timeline-item ruler-container",children:[Object(l.jsx)("div",{}),Object(l.jsx)("div",{className:"ruler",children:Object(l.jsx)("div",{className:"ruler-wrapper",children:T.map((function(e,t){return e>=u&&Object(l.jsx)("div",{className:"rule",posn:e,style:{left:100*(e-p)/(y/h)+"%"}},t)}))})})]}),s.map((function(e,t){return Object(l.jsxs)("li",{className:"timeline-item",label:e.label,disabled:r[t]?"disabled":void 0,tracked:S(e)?"tracked":void 0,children:[Object(l.jsxs)("div",{className:"line-label",title:e.label,style:{color:e.color},children:[Object(l.jsx)("button",{className:"line-toggle",tabIndex:"none"===c?"0":"-1",onClick:w,children:Object(l.jsx)(v.a,{icon:r[t]?O.g:O.f})}),Object(l.jsx)("button",{className:"line-name",tabIndex:"none"===c?"0":"-1",onClick:C,children:Object(l.jsx)("span",{children:e.label})})]}),Object(l.jsx)("div",{className:"line-container",children:Object(l.jsx)("div",{className:"line-wrapper",children:Object(l.jsxs)("svg",{children:[(e.start>=u||e.end>=u)&&Object(l.jsx)("line",{className:"line-main",stroke:e.color,y1:"50%",y2:"50%",x1:Math.max(0,100*(e.start-p)/(y/h))+"%",x2:Math.max(0,100*(e.start-p)/(y/h))+Math.max(0,100*(e.end-Math.max(e.start,u))/(y/h))+"%"}),e.start>=u&&Object(l.jsx)("line",{className:"line-end",stroke:e.color,y1:"35%",y2:"65%",x1:Math.max(0,100*(e.start-p)/(y/h))+"%",x2:Math.max(0,100*(e.start-p)/(y/h))+"%"}),e.end>=u&&Object(l.jsx)("line",{className:"line-end",stroke:e.color,y1:"35%",y2:"65%",x1:Math.max(0,100*(e.start-p)/(y/h))+Math.max(0,100*(e.end-Math.max(e.start,u))/(y/h))+"%",x2:Math.max(0,100*(e.start-p)/(y/h))+Math.max(0,100*(e.end-Math.max(e.start,u))/(y/h))+"%"}),e.events.map((function(a,s){return a.posn>=u&&Object(l.jsxs)("g",{children:[Object(l.jsx)("circle",{className:"line-event",posn:a.posn,label:a.label,tabIndex:!r[t]&&S(e)&&"none"===c?"0":void 0,stroke:e.color,cy:"50%",cx:100*(a.posn-p)/(y/h)+"%",onMouseOver:function(t){return!(e.label===i&&a.label===o)&&t.target.setAttribute("r","0.75em")},onMouseOut:function(t){return!(e.label===i&&a.label===o)&&t.target.setAttribute("r","0.5em")},onClick:n.handleSelectEvent}),Object(l.jsx)("line",{y1:"50%",y2:"0%",x1:100*(a.posn-p)/(y/h)+"%",x2:100*(a.posn-p)/(y/h)+"%"}),Object(l.jsx)("rect",{fill:"white",height:"1.5em",y:"-0.75em",rx:"0.25em",ry:"0.25em",width:"[".concat(a.posn,"] ").concat(a.label).length+"ch",x:"calc("+100*(a.posn-p)/(y/h)+"% - "+"[".concat(a.posn,"] ").concat(a.label).length/2+"ch)"}),Object(l.jsx)("text",{x:100*(a.posn-p)/(y/h)+"%",dominantBaseline:"middle",textAnchor:"middle",children:"[".concat(a.posn,"] ").concat(a.label)})]},s)}))]})})})]},t)}))]}),m>=u&&Object(l.jsx)("div",{className:"timeline-tracker",posn:m,style:{left:k+"px"}}),Object(l.jsxs)("div",{className:"timeline-bottom",children:[Object(l.jsx)("div",{className:"timeline-scrollbar",children:Object(l.jsx)("div",{className:"scrollbar-thumb",style:{left:100*u/y+"%",width:"calc("+100/h+"% - "+z+"px)",marginLeft:z,opacity:1===h?"0":"1"}})}),Object(l.jsxs)("div",{className:"timeline-controls",children:[Object(l.jsx)("div",{}),Object(l.jsx)("div",{className:"zoom-info",title:"Click and drag or use Alt+Scroll to zoom timelines",children:Object(l.jsxs)("span",{zoom:Math.round(100*h),onMouseMove:function(e){return n.state.mouseDown&&E(e)},children:[Object(l.jsx)(v.a,{icon:O.i}),Object(l.jsx)("span",{children:Math.floor(100*h)+"%"})]})}),m>=0&&Object(l.jsxs)("button",{className:"clear-button",onClick:A,children:[Object(l.jsx)(v.a,{icon:O.j}),Object(l.jsx)("span",{children:"Clear selected"})]}),-1===m&&Object(l.jsx)("div",{})]})]})]})]})}},{key:"selectedObject",get:function(){var e={timeline:null,event:null},t=this.state,n=t.source,l=t.selectedTimeline,a=t.selectedEvent;return null===l?e:(e.timeline=n.find((function(e){return e.label===l})),null===a||(e.event=e.timeline.events.find((function(e){return e.label===a}))),e)}},{key:"allUniqueDates",get:function(){var e=[];return this.state.source.forEach((function(t){t.start in e||e.push(t.start),t.end in e||e.push(t.end)})),e.sort((function(e,t){return e-t})),e}},{key:"boundsAndLength",get:function(){var e=void 0,t=void 0;return this.state.source.forEach((function(n){void 0===e?(e=n.start,t=n.end):(n.start<e&&(e=n.start),n.end>t&&(t=n.end))})),{earliestDate:e,latestDate:t,totalLength:t-e}}}]),n}(s.a.Component),y=function(e){Object(h.a)(n,e);var t=Object(u.a)(n);function n(e){var l;return Object(c.a)(this,n),(l=t.call(this,e)).state={source:m},l.handleLoadFile=l.handleLoadFile.bind(Object(d.a)(l)),l}return Object(r.a)(n,[{key:"componentDidMount",value:function(){}},{key:"handleLoadFile",value:function(e){this.setState({lines:JSON.parse(e)})}},{key:"render",value:function(){return null!==this.state.lines?Object(l.jsx)("div",{className:"App",children:Object(l.jsx)(p,{source:m})}):Object(l.jsx)("div",{className:"App"})}}]),n}(s.a.Component),g=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,31)).then((function(t){var n=t.getCLS,l=t.getFID,a=t.getFCP,s=t.getLCP,i=t.getTTFB;n(e),l(e),a(e),s(e),i(e)}))};o.a.render(Object(l.jsx)(s.a.StrictMode,{children:Object(l.jsx)(y,{})}),document.getElementById("root")),g()}},[[30,1,2]]]);
//# sourceMappingURL=main.d9135ee6.chunk.js.map