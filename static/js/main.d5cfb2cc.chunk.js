(this["webpackJsonpproject-timeline"]=this["webpackJsonpproject-timeline"]||[]).push([[0],{13:function(e){e.exports=JSON.parse('{"type":"project","label":"Timelines demo","notes":"The Project is the top-level directory and has as its children all Timelines.","timelines":{"Timeline A":{"label":"Timeline A","type":"timeline","notes":"These are the timeline notes","start":0,"end":50,"color":"crimson"},"Timeline B":{"label":"Timeline B","type":"timeline","notes":"These are the timeline notes","start":25,"end":75,"color":"cornflowerblue"},"Timeline C":{"label":"Timeline C","type":"timeline","notes":"These are the timeline notes","start":50,"end":100,"color":"gold"},"Timeline D":{"label":"Timeline D","type":"timeline","notes":"These are the timeline notes","start":12.5,"end":37.5,"color":"forestgreen"},"Timeline E":{"label":"Timeline E","type":"timeline","notes":"These are the timeline notes","start":37.5,"end":62.5,"color":"MediumVioletRed "},"Timeline F":{"label":"Timeline F","type":"timeline","notes":"These are the timeline notes","start":62.5,"end":87.5,"color":"orangered"}},"events":{"Event A1":{"label":"Event A1","type":"event","timelines":["Timeline A"],"notes":"These are the event notes."},"Event A2":{"label":"Event A2","type":"event","timelines":["Timeline A"],"notes":"These are the event notes."},"Event A3":{"label":"Event A3","type":"event","timelines":["Timeline A"],"notes":"These are the event notes."},"Event B1":{"label":"Event B1","type":"event","timelines":["Timeline B"],"notes":"These are the event notes."},"Event B2":{"label":"Event B2","type":"event","timelines":["Timeline B"],"notes":"These are the event notes."},"Event C":{"label":"Event C","type":"event","timelines":["Timeline C"],"notes":"These are the event notes."},"Event D":{"label":"Event D","type":"event","timelines":["Timeline D"],"notes":"These are the event notes."},"Event E":{"label":"Event E","type":"event","timelines":["Timeline E"],"notes":"These are the event notes."},"Event F":{"label":"Event F","type":"event","timelines":["Timeline F"],"notes":"These are the event notes."}}}')},22:function(e,t,n){},23:function(e,t,n){},24:function(e,t,n){},30:function(e,t,n){"use strict";n.r(t);var i=n(0),l=n(4),s=n.n(l),a=n(15),o=n.n(a),c=(n(22),n(5)),r=n(6),d=n(2),h=n(10),u=n(9),m=(n(23),n(24),n(13)),v=n(8),b=n.n(v),j=n(7),p=n(3),O=n(16),f=function(){function e(t){var n=this;Object(c.a)(this,e),this.original=void 0,this.map=void 0,this.type=void 0,this.label=void 0,this.notes=void 0,this.mapTimelines=function(e){return Object.values(n.map).map(e)},this.original=t,this.type=t.type,this.label=t.label,this.notes=t.notes,this.map={};var i=this.map;Object.values(t.timelines).forEach((function(e,n){var l=new y(e),s=[];Object.values(t.events).forEach((function(e,t){var n=new x(e).setColor(l.color).setParentLabel(l.label);n.isChildOf(l.label)&&s.push(n.label)})),l.addChildren(s),i[l.label]=l})),this.get=this.get.bind(this),this.mapTimelines=this.mapTimelines.bind(this)}return Object(r.a)(e,[{key:"get",value:function(e,t){return void 0===e?this:void 0===t?this.map[e]:new x(this.original.events[t]).setColor(this.map[e].color).setParentLabel(e)}},{key:"set",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;void 0!==e&&(this.map[e][t]=n)}},{key:"forEachTimeline",value:function(e){Object.values(this.map).forEach(e)}},{key:"getChildEvents",value:function(e){var t=this.get;return this.map[e].children.map((function(n){return t(e,n)}))}},{key:"getOriginal",get:function(){return this.original}},{key:"allUniqueDates",get:function(){var e=[];return this.forEachTimeline((function(t){t.start in e||e.push(t.start),t.end in e||e.push(t.end)})),e.sort((function(e,t){return e-t})),e}},{key:"boundsAndLength",get:function(){var e=-1,t=-1;return this.forEachTimeline((function(n){-1===e?(e=n.start,t=n.end):(n.start<e&&(e=n.start),n.end>t&&(t=n.end))})),{earliestDate:e,latestDate:t,totalLength:t-e}}}]),e}(),y=function(){function e(t){Object(c.a)(this,e),this.label=void 0,this.type=void 0,this.notes=void 0,this.start=void 0,this.end=void 0,this.color=void 0,this.children=void 0,this.label=t.label,this.type=t.type,this.notes=t.notes,this.start=t.start,this.end=t.end,this.color=t.color,this.children=[]}return Object(r.a)(e,[{key:"addChild",value:function(e){this.children.push(e)}},{key:"addChildren",value:function(e){var t;(t=this.children).push.apply(t,Object(O.a)(e))}}]),e}(),x=function(){function e(t){Object(c.a)(this,e),this.label=void 0,this.type=void 0,this.notes=void 0,this.posn=void 0,this.timelines=void 0,this.parentLabel=void 0,this.color=void 0,this.children=void 0,this.label=t.label,this.type=t.type,this.notes=t.notes,this.posn=t.posn,this.timelines=t.timelines,this.parentLabel="",this.color="",this.children=[]}return Object(r.a)(e,[{key:"setColor",value:function(e){return this.color=e,this}},{key:"setParentLabel",value:function(e){return this.parentLabel=e,this}},{key:"isChildOf",value:function(e){return this.timelines.indexOf(e)>=0}}]),e}(),g=f,k=function(e){Object(h.a)(n,e);var t=Object(u.a)(n);function n(e){var i;return Object(c.a)(this,n),(i=t.call(this,e)).state={item:e.item},i.selectHandlers=e.selectHandlers,i.handleSelectProject=i.selectHandlers.handleSelectProject,i.handleSelectTimeline=i.selectHandlers.handleSelectTimeline,i.handleSelectEvent=i.selectHandlers.handleSelectEvent,i}return Object(r.a)(n,[{key:"componentDidMount",value:function(){}},{key:"componentWillReceiveProps",value:function(e){this.setState({item:e.item})}},{key:"render",value:function(){var e=this.state.item,t=this.handleSelectProject,n=this.handleSelectTimeline;return Object(i.jsxs)("div",{className:"parent-label",children:[Object(i.jsxs)("span",{className:"link-button",tabIndex:"0",onClick:t,children:[Object(i.jsx)(j.a,{icon:p.j}),"PROJECT"]}),Object(i.jsx)(j.a,{icon:p.b}),"event"===e.type&&Object(i.jsx)("span",{className:"link-button",tabIndex:"0",label:e.parentLabel,style:{color:e.color},onClick:n,children:e.parentLabel}),"event"===e.type&&Object(i.jsx)(j.a,{icon:p.b})]})}}]),n}(s.a.Component),T=function(e){Object(h.a)(n,e);var t=Object(u.a)(n);function n(e){var i;return Object(c.a)(this,n),(i=t.call(this,e)).state={list:e.list,label:e.label,showDetails:e.showDetails},i.selectHandlers=e.selectHandlers,i.handleSelectProject=i.selectHandlers.handleSelectProject,i.handleSelectTimeline=i.selectHandlers.handleSelectTimeline,i.handleSelectEvent=i.selectHandlers.handleSelectEvent,i.toggleDetails=i.toggleDetails.bind(Object(d.a)(i)),i}return Object(r.a)(n,[{key:"componentDidMount",value:function(){}},{key:"componentWillReceiveProps",value:function(e){this.setState({list:e.list})}},{key:"toggleDetails",value:function(e){var t=this.state.showDetails;this.setState({showDetails:!t})}},{key:"render",value:function(){var e=this.state.showDetails,t=this.selectHandlers,n=this.handleSelectTimeline,l=this.handleSelectEvent,s=this.toggleDetails;return Object(i.jsxs)("div",{className:"timeline-item-list",children:[Object(i.jsxs)("header",{className:"list-header",children:[Object(i.jsx)("div",{className:"list-item-count",children:"".concat(this.state.list.length," ").concat(this.state.label,"...")}),Object(i.jsxs)("button",{className:"scale-icon list-detail-toggle",onClick:s,children:[Object(i.jsx)(j.a,{icon:e?p.f:p.g})," Show details?"]})]}),Object(i.jsx)("ul",{className:"list-body",children:this.state.list.map((function(s,a){return Object(i.jsxs)("li",{className:"list-item",type:s.type,style:{color:"timeline"===s.type?s.color:"white"},children:[Object(i.jsxs)("div",{className:"item-summary-cell",children:[Object(i.jsx)(k,{item:s,selectHandlers:t}),Object(i.jsx)("div",{className:"item-label link-button",tabIndex:"0",type:s.type,parent:s.parentLabel,label:s.label,onClick:"timeline"===s.type?n:l,children:s.label}),e&&Object(i.jsx)("div",{className:"item-notes",children:s.notes})]}),Object(i.jsxs)("div",{children:["event"===s.type&&Object(i.jsx)("div",{children:s.posn}),"timeline"===s.type&&Object(i.jsxs)("div",{children:[s.start," \u2013 ",s.end]})]})]},a)}))})]})}}]),n}(s.a.Component);function S(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){return!0},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){return!0},i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(e,t){return 0},l=[];return e.forEachTimeline((function(i){t(i)&&l.push(i),e.getChildEvents(i.label).forEach((function(e){n(e)&&l.push(e)}))})),l.sort(i),l}var C=function(e){Object(h.a)(n,e);var t=Object(u.a)(n);function n(e){var i;return Object(c.a)(this,n),(i=t.call(this,e)).state={source:e.source,selectedTimeline:e.selectedObject.timeline,selectedEvent:e.selectedObject.event,hasMounted:!1},i.selectHandlers=e.selectHandlers,i}return Object(r.a)(n,[{key:"componentDidMount",value:function(){this.setState({hasMounted:!0})}},{key:"componentWillReceiveProps",value:function(e){this.setState({source:e.source,selectedTimeline:e.selectedObject.timeline,selectedEvent:e.selectedObject.event})}},{key:"render",value:function(){return this.state.hasMounted?this.fullRender():this.renderLoad()}},{key:"renderLoad",value:function(){return Object(i.jsx)("div",{})}},{key:"fullRender",value:function(){var e=this.state,t=e.source,n=e.selectedTimeline,l=e.selectedEvent,s=this.selectHandlers,a=this.getAllChildren,o=t.get(null===n||void 0===n?void 0:n.label,null===l||void 0===l?void 0:l.label);return Object(i.jsxs)("div",{className:"main-overlay",children:["project"!==o.type&&Object(i.jsx)(k,{item:t.get(null===n||void 0===n?void 0:n.label,null===l||void 0===l?void 0:l.label),selectHandlers:s}),Object(i.jsxs)("div",{className:"notes-section",children:[Object(i.jsx)("div",{className:"selected-label",children:o.label}),Object(i.jsx)("div",{className:"selected-notes",children:o.notes})]}),Object(i.jsx)("div",{className:"hr"}),void 0===l&&Object(i.jsx)(T,{list:a,label:"children",showDetails:!1,selectHandlers:s})]})}},{key:"getAllChildren",get:function(){var e=this.state,t=e.selectedTimeline,n=e.selectedEvent,i=function(e,t){var n,i;return(null!==(n=e.start)&&void 0!==n?n:e.posn)>(null!==(i=t.start)&&void 0!==i?i:t.posn)};return void 0===t?S(this.state.source,(function(){return!0}),(function(){return!1}),i):void 0!==t&&void 0===n?S(this.state.source,(function(){return!1}),(function(e){return e.timelines.indexOf(t.label)>=0}),i):[]}}]),n}(s.a.Component),N=function(e){Object(h.a)(n,e);var t=Object(u.a)(n);function n(e){var i;return Object(c.a)(this,n),(i=t.call(this,e)).state={source:e.source,searchString:"",typeFilters:["timeline","event"],hasMounted:!1},i.selectHandlers=e.selectHandlers,i.handleSearch=i.handleSearch.bind(Object(d.a)(i)),i.handleFilter=i.handleFilter.bind(Object(d.a)(i)),i}return Object(r.a)(n,[{key:"componentDidMount",value:function(){this.setState({hasMounted:!0})}},{key:"componentWillReceiveProps",value:function(e){this.setState({source:e.source})}},{key:"handleSearch",value:function(e){this.setState({searchString:e.target.value})}},{key:"handleFilter",value:function(e){var t=e.target.value,n=["timeline","event"];"Timelines only"===t&&(n=["timeline"]),"Events only"===t&&(n=["event"]),this.setState({typeFilters:n}),this.forceUpdate()}},{key:"render",value:function(){return this.state.hasMounted?this.fullRender():this.renderLoad()}},{key:"renderLoad",value:function(){return Object(i.jsx)("div",{})}},{key:"fullRender",value:function(){var e=this.state,t=e.searchString,n=e.typeFilters,l=this.selectHandlers,s=this.handleSearch,a=this.handleFilter,o=this.getAllItems.filter((function(e){return n.indexOf(e.type)>=0}));return Object(i.jsxs)("div",{className:"search-overlay",children:[Object(i.jsx)("datalist",{id:"results",children:o.map((function(e,t){return Object(i.jsx)("option",{value:e.label},t)}))}),Object(i.jsxs)("div",{className:"search-controls",children:[Object(i.jsx)("input",{className:"search-field",name:"search-field",list:"results",value:t,placeholder:"Search...",onChange:s}),Object(i.jsxs)("select",{className:"search-filter",onChange:a,children:[Object(i.jsx)("option",{value:"Timelines & Events",children:"Timelines & Events"}),Object(i.jsx)("option",{value:"Timelines only",children:"Timelines only"}),Object(i.jsx)("option",{value:"Events only",children:"Events only"})]})]}),Object(i.jsx)(T,{list:o,label:"results",showDetails:!0,selectHandlers:l})]})}},{key:"getAllItems",get:function(){var e=this.state.searchString.toLowerCase();return S(this.state.source,(function(t){return t.label.toLowerCase().indexOf(e)>=0||t.notes.toLowerCase().indexOf(e)>=0}),(function(t){return t.timelines.join("").toLowerCase().indexOf(e)>=0||t.label.toLowerCase().indexOf(e)>=0||t.notes.toLowerCase().indexOf(e)>=0}),(function(e,t){return e.label>t.label||"timeline"===t.type&&"event"===e.type?1:t.label>e.label||"timeline"===e.type&&"event"===t.type?-1:0}))}}]),n}(s.a.Component),E=function(e){Object(h.a)(n,e);var t=Object(u.a)(n);function n(e){var i;Object(c.a)(this,n),(i=t.call(this,e)).handleZoomIn=function(){return i.handleZoom(.1)},i.handleZoomOut=function(){return i.handleZoom(-.1)},i.toggleMenu=function(){return i.setOverlay("none"===i.state.overlay?"menu":"none")},i.openNavigation=function(){return i.setOverlay("main")},i.openSearch=function(){return i.setOverlay("search")},i.toggleFullscreen=function(){return i.setState({fullscreen:!i.state.fullscreen})};var l=e.source;return Object.values(l.events).forEach((function(e,t){var n,i;e.timelines.map((function(e){return l.timelines[e]})).forEach((function(e,t){return void 0===n?(n=e.start,void(i=e.end)):e.start<n?n=e.start:e.start>i?i=e.start:void 0})),e.posn=Math.round(Math.random()*(i-n)+n)})),i.state={source:new g(l),selectedTimeline:void 0,selectedEvent:void 0,overlay:"none",fullscreen:!1,disabledArray:Array(Object.values(e.source.timelines).length).fill(!1),trackPosn:-1,scrollPosn:0,zoom:1,hasMounted:!1,mouseDown:null,readyForTrack:!0,minWidth:e.minWidth,width:e.width,maxWidth:e.maxWidth,minHeight:e.minHeight,height:e.height,maxHeight:e.maxHeight,aspectRatio:e.aspectRatio},i.handleSelect=i.handleSelect.bind(Object(d.a)(i)),i.handleSelectProject=i.handleSelectProject.bind(Object(d.a)(i)),i.handleSelectTimeline=i.handleSelectTimeline.bind(Object(d.a)(i)),i.handleSelectEvent=i.handleSelectEvent.bind(Object(d.a)(i)),i.isTracked=i.isTracked.bind(Object(d.a)(i)),i.handleToggleLine=i.handleToggleLine.bind(Object(d.a)(i)),i.handleTrack=i.handleTrack.bind(Object(d.a)(i)),i.handleScroll=i.handleScroll.bind(Object(d.a)(i)),i.handleZoomIn=i.handleZoomIn.bind(Object(d.a)(i)),i.handleZoomOut=i.handleZoomOut.bind(Object(d.a)(i)),i.handleDragToZoom=i.handleDragToZoom.bind(Object(d.a)(i)),i.toggleFullscreen=i.toggleFullscreen.bind(Object(d.a)(i)),i.handleClearState=i.handleClearState.bind(Object(d.a)(i)),i.handleKeyPress=i.handleKeyPress.bind(Object(d.a)(i)),i.handleSaveToFile=i.handleSaveToFile.bind(Object(d.a)(i)),i.handleCopyAsJSON=i.handleCopyAsJSON.bind(Object(d.a)(i)),i}return Object(r.a)(n,[{key:"componentDidMount",value:function(){var e=this;window.addEventListener("resize",(function(){var t=e.state.resizeTicker;e.setState({resizeTicker:(null!==t&&void 0!==t?t:0)+1})})),this.setState({hasMounted:!0})}},{key:"posnToCoord",value:function(e){var t=b()("ul.timeline > .timeline-item > .line-container");if(void 0===t.position())return 0;var n=b()(".timeline"),i=this.state,l=i.scrollPosn,s=i.zoom,a=this.state.source.boundsAndLength.totalLength;return t.position().left-n.position().left+parseInt(t.css("padding-left"))-2+t.width()*((e-l)/(a/s))}},{key:"coordToPosn",value:function(e){var t,n,i=b()(".timeline"),l=b()(".timeline > .timeline-item > .line-container > .line-wrapper"),s=this.state,a=s.zoom,o=s.scrollPosn,c=this.state.source.boundsAndLength,r=c.earliestDate,d=c.latestDate,h=c.totalLength,u=null===(t=l[0])||void 0===t||null===(n=t.getBoundingClientRect())||void 0===n?void 0:n.left,m=i.position().left,v=l.width();return Math.max(r,Math.min(d,h/Math.pow(a,2)*(e-(u-m))/(v/a)+Math.max(r,o)))}},{key:"isTracked",value:function(e){var t=this.state.trackPosn;return!(e.start>t||e.end<t)||-1===t}},{key:"handleSelect",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){};this.setState({selectedTimeline:e,selectedEvent:t,overlay:"main"},n())}},{key:"handleSelectProject",value:function(e){this.handleSelect(void 0)}},{key:"handleSelectTimeline",value:function(e){var t=b()(e.target).closest("[label]").attr("label");this.handleSelect(t)}},{key:"handleSelectEvent",value:function(e){var t=b()(e.target).attr("parent"),n=b()(e.target).attr("label");this.handleSelect(t,n)}},{key:"handleZoom",value:function(e){var t=this.state,n=t.zoom,i=t.scrollPosn,l=this.state.source.boundsAndLength.totalLength,s=Math.max(1,Math.min(2,n+e));this.setState({zoom:s,scrollPosn:Math.max(0,Math.min(l-l/s,i*s/n))})}},{key:"handleDragToZoom",value:function(e){e.movementX>0&&this.handleZoomIn(),e.movementX<0&&this.handleZoomOut()}},{key:"handleScroll",value:function(e){if(e.altKey||e.shiftKey){if(e.altKey)return e.deltaY>0?this.handleZoomOut(e):this.handleZoomIn(e);if(e.shiftKey){var t=this.state,n=t.scrollPosn,i=t.zoom,l=this.state.source.boundsAndLength,s=l.earliestDate,a=l.latestDate,o=l.totalLength,c=(e.deltaY<0?-1:1)*o/20;this.setState({scrollPosn:Math.min(a-o/i,Math.max(s,n+c))})}}}},{key:"snapToEvent",value:function(e){var t=b()(e.target).attr("posn");this.setState({trackPosn:t})}},{key:"handleTrack",value:function(e){if(!(b()(e.target).is(".timeline-bottom *")||b()(e.target).is(".timeline-item > .line-label *")||b()(e.target).is(".line-event")&&"click"===e.type||["click","mousedown","mousemove","touchmove"].indexOf(e.type)<0||"touchmove"===e.type&&!this.state.readyForTrack||1!==e.buttons)){if(b()(e.target).hasClass("line-event")&&["mousemove","touchmove"].indexOf(e.type)>=0)return this.snapToEvent(e);var t="touchmove"===e.type?e.touches[0].clientX:e.clientX,n=this.coordToPosn(t);this.setState({trackPosn:n,readyForTrack:!1},(function(){var e=this;setTimeout((function(){e.setState({readyForTrack:!0})}),0)}))}}},{key:"handleToggleLine",value:function(e){var t=this.state.disabledArray.concat([]);this.state.source.forEachTimeline((function(n,i){n.label===b()(e.target).closest(".timeline-item").attr("label")&&(t[i]=!t[i])})),this.setState({disabledArray:t})}},{key:"handleClearState",value:function(){"none"!==this.state.overlay?this.closeOverlay():this.setState({trackPosn:-1,selectedTimeline:void 0,selectedEvent:void 0,zoom:1})}},{key:"handleKeyPress",value:function(e){"Escape"===e.key&&(this.state.fullscreen?this.toggleFullscreen():this.handleClearState())}},{key:"setOverlay",value:function(e){this.setState({overlay:e})}},{key:"handleSaveToFile",value:function(){var e=document.createElement("a");e.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(JSON.stringify(this.state.source.getOriginal))),e.setAttribute("download","timeline.json"),e.style.display="none",document.body.appendChild(e),e.click(),document.body.removeChild(e)}},{key:"handleCopyAsJSON",value:function(){var e=document.createElement("input");e.setAttribute("type","text"),e.value=JSON.stringify(this.state.source.getOriginal),document.body.appendChild(e),e.select(),e.setSelectionRange(0,99999),document.execCommand("copy"),document.body.removeChild(e)}},{key:"render",value:function(){return this.state.hasMounted?this.fullRender():this.renderLoad()}},{key:"renderLoad",value:function(){return Object(i.jsx)("div",{className:"timeline-container",children:Object(i.jsx)("div",{className:"load-spinner"})})}},{key:"fullRender",value:function(){var e,t,n=this,l=this.state,s=l.source,a=l.selectedTimeline,o=l.selectedEvent,c=l.overlay,r=l.disabledArray,d=l.mouseDown,h=l.zoom,u=l.scrollPosn,m=l.trackPosn,v={minWidth:this.state.minWidth,width:this.state.width,maxWidth:this.state.maxWidth,minHeight:this.state.minHeight,height:this.state.height,maxHeight:this.state.maxHeight,aspectRatio:this.state.aspectRatio},O=this.state.source.boundsAndLength.earliestDate+this.state.scrollPosn,f=this.state.source.boundsAndLength.totalLength,y=this.selectedObject,x=this.posnToCoord(this.state.trackPosn),g=this.state.source.allUniqueDates,k=this.isTracked,T=this.handleSelectProject,S=this.handleSelectTimeline,E=this.handleSelectEvent,M=this.handleScroll,w=this.handleDragToZoom,L=this.handleToggleLine,D=this.handleTrack,P=this.handleClearState,A=this.handleKeyPress,F=this.toggleFullscreen,H=this.toggleMenu,I=this.openNavigation,R=this.openSearch,Z=this.handleSaveToFile,z=this.handleCopyAsJSON,W=null!==(e=null===(t=b()("ul.timeline > .timeline-item > .line-container").position())||void 0===t?void 0:t.left)&&void 0!==e?e:0,B={handleSelectProject:T,handleSelectTimeline:S,handleSelectEvent:E};return Object(i.jsxs)("div",{className:"timeline-container",theme:"light",style:v,tabIndex:"0",fullscreen:!0===this.state.fullscreen?"fullscreen":void 0,onMouseDown:function(e){return n.setState({mouseDown:e.target})},onMouseUp:function(e){n.setState({mouseDown:null})},onKeyDown:A,children:[Object(i.jsxs)("header",{className:"timeline-container-header",children:[Object(i.jsxs)("button",{className:"scale-icon menu-button",onClick:H,children:[Object(i.jsx)(j.a,{icon:"none"===this.state.overlay?p.a:p.l}),Object(i.jsx)("span",{children:"none"===this.state.overlay?"Menu":"Close"})]}),Object(i.jsx)("div",{className:"project-title",children:s.label}),Object(i.jsxs)("button",{className:"scale-icon expand-collapse-button",onClick:F,children:[Object(i.jsx)(j.a,{icon:!0===this.state.fullscreen?p.d:p.e}),Object(i.jsx)("span",{children:!0===this.state.fullscreen?"Collapse":"Expand"})]})]}),Object(i.jsxs)("div",{className:"timeline-container-body",onMouseMove:D,children:[Object(i.jsxs)("div",{className:"overlay-layer",expanded:"none"!==c?"expanded":void 0,children:["none"!==c&&Object(i.jsxs)("ul",{className:"menu-overlay",children:[Object(i.jsxs)("li",{className:"scale-icon search-button",tabIndex:"none"===c?"-1":"0",isopen:"search"===c?"true":void 0,onClick:R,children:[Object(i.jsx)(j.a,{icon:p.k}),Object(i.jsx)("span",{children:"Search"})]}),Object(i.jsxs)("li",{className:"scale-icon open-navigation",tabIndex:"none"===c?"-1":"0",isopen:"main"===c?"true":void 0,onClick:I,children:[Object(i.jsx)(j.a,{icon:p.i}),Object(i.jsx)("span",{children:"Navigation view"})]}),Object(i.jsxs)("li",{className:"scale-icon save-button",tabIndex:"none"===c?"-1":"0",onClick:Z,children:[Object(i.jsx)(j.a,{icon:p.h}),Object(i.jsx)("span",{children:"Download as file"})]}),Object(i.jsxs)("li",{className:"scale-icon copy-button",tabIndex:"none"===c?"-1":"0",onClick:z,children:[Object(i.jsx)(j.a,{icon:p.c}),Object(i.jsx)("span",{children:"Copy as JSON"})]})]}),"main"===c&&Object(i.jsx)(C,{source:s,selectedObject:y,selectHandlers:B}),"search"===c&&Object(i.jsx)(N,{source:s,selectHandlers:B})]}),Object(i.jsxs)("ul",{className:"timeline",dragging:null!==d?"dragging":void 0,onWheel:M,children:[Object(i.jsxs)("li",{className:"timeline-item ruler-container",children:[Object(i.jsx)("div",{}),Object(i.jsx)("div",{className:"ruler",children:Object(i.jsx)("div",{className:"ruler-wrapper",children:g.map((function(e,t){return e>=u&&Object(i.jsx)("div",{className:"rule",posn:e,style:{left:100*(e-O)/(f/h)+"%"}},t)}))})})]}),s.mapTimelines((function(e,t){return Object(i.jsxs)("li",{className:"timeline-item",label:e.label,disabled:r[t]?"disabled":void 0,tracked:k(e)?"tracked":void 0,children:[Object(i.jsxs)("div",{className:"line-label",title:e.label,style:{color:e.color},children:[Object(i.jsx)("button",{className:"scale-icon line-toggle",tabIndex:"none"===c?"0":"-1",onClick:L,children:Object(i.jsx)(j.a,{icon:r[t]?p.g:p.f})}),Object(i.jsx)("button",{className:"line-name link-button",tabIndex:"none"===c?"0":"-1",label:e.label,onClick:S,children:Object(i.jsx)("span",{children:e.label})})]}),Object(i.jsx)("div",{className:"line-container",children:Object(i.jsx)("div",{className:"line-wrapper",children:Object(i.jsxs)("svg",{children:[(e.start>=u||e.end>=u)&&Object(i.jsx)("line",{className:"line-main",stroke:e.color,y1:"50%",y2:"50%",x1:Math.max(0,100*(e.start-O)/(f/h))+"%",x2:Math.max(0,100*(e.start-O)/(f/h))+Math.max(0,100*(e.end-Math.max(e.start,u))/(f/h))+"%"}),e.start>=u&&Object(i.jsx)("line",{className:"line-end",stroke:e.color,y1:"35%",y2:"65%",x1:Math.max(0,100*(e.start-O)/(f/h))+"%",x2:Math.max(0,100*(e.start-O)/(f/h))+"%"}),e.end>=u&&Object(i.jsx)("line",{className:"line-end",stroke:e.color,y1:"35%",y2:"65%",x1:Math.max(0,100*(e.start-O)/(f/h))+Math.max(0,100*(e.end-Math.max(e.start,u))/(f/h))+"%",x2:Math.max(0,100*(e.start-O)/(f/h))+Math.max(0,100*(e.end-Math.max(e.start,u))/(f/h))+"%"}),s.getChildEvents(e.label).map((function(n,l){return n.posn>=u&&Object(i.jsxs)("g",{children:[Object(i.jsx)("circle",{className:"line-event",posn:n.posn,label:n.label,tabIndex:!r[t]&&k(e)&&"none"===c?"0":void 0,stroke:e.color,cy:"50%",cx:100*(n.posn-O)/(f/h)+"%",onMouseOver:function(t){return!(e.label===a&&n.label===o)&&t.target.setAttribute("r","0.75em")},onMouseOut:function(t){return!(e.label===a&&n.label===o)&&t.target.setAttribute("r","0.5em")},parent:e.label,onClick:E}),Object(i.jsx)("line",{y1:"50%",y2:"0%",x1:100*(n.posn-O)/(f/h)+"%",x2:100*(n.posn-O)/(f/h)+"%"}),Object(i.jsx)("rect",{fill:"white",height:"1.5em",y:"-0.75em",rx:"0.25em",ry:"0.25em",width:"[".concat(n.posn,"] ").concat(n.label).length+"ch",x:"calc("+100*(n.posn-O)/(f/h)+"% - "+"[".concat(n.posn,"] ").concat(n.label).length/2+"ch)"}),Object(i.jsx)("text",{x:100*(n.posn-O)/(f/h)+"%",dominantBaseline:"middle",textAnchor:"middle",children:"[".concat(n.posn,"] ").concat(n.label)})]},l)}))]})})})]},t)}))]}),m>=u&&Object(i.jsx)("div",{className:"timeline-tracker",posn:m,style:{left:x+"px"}}),Object(i.jsxs)("div",{className:"timeline-bottom",children:[Object(i.jsx)("div",{className:"timeline-scrollbar",children:Object(i.jsx)("div",{className:"scrollbar-thumb",style:{left:100*u/f+"%",width:"calc("+100/h+"% - "+W+"px)",marginLeft:W,opacity:1===h?"0":"1"}})}),Object(i.jsxs)("div",{className:"timeline-controls",children:[Object(i.jsx)("div",{}),Object(i.jsx)("div",{className:"zoom-info",title:"Click and drag or use Alt+Scroll to zoom timelines",children:Object(i.jsxs)("span",{zoom:Math.round(100*h),onMouseMove:function(e){return n.state.mouseDown&&w(e)},children:[Object(i.jsx)(j.a,{icon:p.k}),Object(i.jsx)("span",{children:Math.floor(100*h)+"%"})]})}),m>=0&&Object(i.jsxs)("button",{className:"scale-icon clear-button",onClick:P,children:[Object(i.jsx)(j.a,{icon:p.l}),Object(i.jsx)("span",{children:"Clear selected"})]}),-1===m&&Object(i.jsx)("div",{})]})]})]})]})}},{key:"selectedObject",get:function(){var e={timeline:void 0,event:void 0},t=this.state,n=t.source,i=t.selectedTimeline,l=t.selectedEvent;return void 0===i?e:(e.timeline=n.get(i),void 0===l||(e.event=n.get(i,l)),e)}}]),n}(s.a.Component),M=function(e){Object(h.a)(n,e);var t=Object(u.a)(n);function n(e){var i;return Object(c.a)(this,n),(i=t.call(this,e)).state={source:m},i.handleLoadFile=i.handleLoadFile.bind(Object(d.a)(i)),i}return Object(r.a)(n,[{key:"componentDidMount",value:function(){}},{key:"handleLoadFile",value:function(e){this.setState({lines:JSON.parse(e)})}},{key:"render",value:function(){return null!==this.state.lines?Object(i.jsx)("div",{className:"App",children:Object(i.jsx)(E,{source:m})}):Object(i.jsx)("div",{className:"App"})}}]),n}(s.a.Component),w=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,32)).then((function(t){var n=t.getCLS,i=t.getFID,l=t.getFCP,s=t.getLCP,a=t.getTTFB;n(e),i(e),l(e),s(e),a(e)}))};o.a.render(Object(i.jsx)(s.a.StrictMode,{children:Object(i.jsx)(M,{})}),document.getElementById("root")),w()}},[[30,1,2]]]);
//# sourceMappingURL=main.d5cfb2cc.chunk.js.map